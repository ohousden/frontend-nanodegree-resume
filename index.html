<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <title>Resume</title>
  <link href="css/style.css" rel="stylesheet" type="text/css">
  <script src="js/jQuery.js"></script>
  <script src="js/helper.js"></script>
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places"></script>
  <meta name="viewport" content="width=device-width">
</head>

<body unresolved>
<div id="main">

  <div id="header" class="center-content clearfix">
    <ul id="topContacts" class='flex-box'></ul>
  </div>
  <div style='clear: both;'></div>
  <div id="workExperience" class='gray'>
    <h2>Work Experience</h2>
  </div>
  <div id="projects">
    <h2>Projects</h2>
  </div>
  <div id="education" class='gray'>
    <h2>Education</h2>
  </div>
  <div id="mapDiv">
    <h2>Where I've Lived and Worked</h2>
  </div>
  <div id="letsConnect" class='dark-gray'>
    <h2 class='orange center-text'>Let's Connect</h2>
    <ul id="footerContacts" class="flex-box">
    </ul>
  </div>
</div>

<script src="js/resumeBuilder.js"></script>
<script type="text/javascript">


  $('#header').append(HTMLheaderName.replace("%data%", bio.name));
  $('#header').append(HTMLheaderRole.replace("%data%", bio.role));
  $("#header").append(HTMLcontactStart);
  $('#header').append(HTMLbioPic.replace("%data%", bio.image));
  displayContacts();
  $("#header").append(HTMLwelcomeMsg.replace("%data%", bio.welcomeMessage));
  $("#header").append(HTMLskillsStart);
  displayWork();
  displaySchools();
  displayCourses();
  $('#main').append(internationalizeButton);
  $("#mapDiv").append(googleMap);

  function displayContacts() {
    $('#contacts').append(HTMLmobile.replace("%data%", bio.contacts.mobileNumber))
    $('#contacts').append(HTMLemail.replace("%data%", bio.contacts.email))
    $('#contacts').append(HTMLgithub.replace("%data%", bio.contacts.githubUsername))
    $('#contacts').append(HTMLlocation.replace("%data%", bio.contacts.location))
    $('#footerContacts').append(HTMLmobile.replace("%data%", bio.contacts.mobileNumber))
    $('#footerContacts').append(HTMLemail.replace("%data%", bio.contacts.email))
    $('#footerContacts').append(HTMLgithub.replace("%data%", bio.contacts.githubUsername))
    $('#footerContacts').append(HTMLlocation.replace("%data%", bio.contacts.location))
  }


  for(skill in bio.skills){
    var formattedSkill = HTMLskills.replace("%data%", bio.skills[skill]);
    $("#skills").append(formattedSkill);
  }

  function inName(name) {
    name = name.trim().split(" ");
    console.log(name);
    name[1] = name[1].toUpperCase();
    name[0] = name[0].slice(0,1).toUpperCase() + name[0].slice(1).toLowerCase();
    return name[0] +" "+ name[1];
  }

  function displayWork() {
    for(job in work.jobs){
      $("#workExperience").append(HTMLworkStart);
      var formattedEmployer = HTMLworkEmployer.replace("%data%", work.jobs[job].employer);
      var formattedTitle = HTMLworkTitle.replace("%data%", work.jobs[job].title);
      var formattedEmployerTitle = formattedEmployer+formattedTitle;
      $(".work-entry:last").append(formattedEmployerTitle);

      var formattedDates = HTMLworkDates.replace("%data%", work.jobs[job].dates);
      $(".work-entry:last").append(formattedDates);

      var formattedDescription = HTMLworkDescription.replace("%data%", work.jobs[job].description);
      $(".work-entry:last").append(formattedDescription);
    }
  }

  function displaySchools() {
    $('#education').append(HTMLschoolStart);
    for(school in education.schools) {
      var schoolName = HTMLschoolName.replace("%data%", education.schools[school].name);
      $(".education-entry").append(schoolName);

      var schoolDegree = HTMLschoolDegree.replace("%data%", education.schools[school].degree);
      $(".education-entry").append(schoolDegree);

      var schoolDates = HTMLschoolDates.replace("%data%", education.schools[school].datesAttended);
      $(".education-entry").append(schoolDates);

      var schoolLocation = HTMLschoolLocation.replace("%data%", education.schools[school].location);
      $(".education-entry").append(schoolLocation);

      var schoolMajors = HTMLschoolMajor.replace("%data%", education.schools[school].majors);
      $(".education-entry").append(schoolMajors);

      var schoolURL = HTMLonlineURL.replace("%data%","link").replace("#", education.schools[school].url);
      $(".education-entry").append(schoolURL);
    }
  }

  function displayCourses(){
    $('#education').append(HTMLonlineClasses);
    $('#education').append(HTMLschoolStart);
    for(course in education.onlineCourses) {
      var courseTitle = HTMLonlineTitle.replace("%data%", education.onlineCourses[course].title);
      $(".education-entry:last").append(courseTitle);

      var courseSchool = HTMLonlineSchool.replace("%data%", education.onlineCourses[course].school);
      $(".education-entry:last").append(courseSchool);

      var courseDates = HTMLonlineDates.replace("%data%", education.onlineCourses[course].dates);
      $(".education-entry:last").append(courseDates);

      var courseURL = HTMLonlineURL.replace("%data%", education.onlineCourses[course].url);
      $(".education-entry:last").append(courseURL);
    }
  }

  projects.display = function() {
    for (project in projects.projects) {
      $("#projects").append(HTMLprojectStart);

      var formattedTitle = HTMLprojectTitle.replace("%data%", projects.projects[project].title);
      $(".project-entry:last").append(formattedTitle);

      var formattedDates = HTMLprojectDates.replace("%data%", projects.projects[project].dates);
      $(".project-entry:last").append(formattedDates);

      var formattedDescription = HTMLprojectDescription.replace("%data%", projects.projects[project].description);
      $(".project-entry:last").append(formattedDescription);

      if (projects.projects[project].images.length > 0) {
        for (image in projects.projects[project].images) {
          var formattedImage = HTMLprojectImage.replace("%data%", projects.projects[project].images[image]);
          $(".project-entry:last").append(formattedImage);
        }
      }
    }
  }

  projects.display();

  if(document.getElementsByClassName('flex-item').length === 0) {
    document.getElementById('topContacts').style.display = 'none';
  }
  if(document.getElementsByTagName('h3').length === 0) {
    document.getElementById('header').style.display = 'none';
  }
  if(document.getElementsByClassName('work-entry').length === 0) {
    document.getElementById('workExperience').style.display = 'none';
  }
  if(document.getElementsByClassName('project-entry').length === 0) {
    document.getElementById('projects').style.display = 'none';
  }
  if(document.getElementsByClassName('education-entry').length === 0) {
    document.getElementById('education').style.display = 'none';
  }
  if(document.getElementsByClassName('flex-item').length === 0) {
    document.getElementById('letsConnect').style.display = 'none';
  }
  if(document.getElementById('map') === null) {
    document.getElementById('mapDiv').style.display = 'none';
  }

  function locationizer(work_obj) {
    var locationsArray = [];
    for(job in work.jobs){
      var jobLocation = work_obj.jobs[job].location;
      locationsArray.push(jobLocation);
    }
    return locationsArray;
  }
</script>
</body>
</html>
